:javascript
  $(document).ready(function() {
  if(document.getElementById('employee_refno').value.length > 0 )
  {
    pan = document.getElementById('employee_pan').value
    document.getElementById('panoption').value = pan
    if(pan == 'PAN Invalid' || pan == 'PAN Applied' || pan == 'PAN Not Avbl' || pan == '')
      document.getElementById('employee_pan').style.display = 'none';
    else
      document.getElementById('employee_pan').style.display = '';
  }
  else
  document.getElementById('employee_pan').style.display = 'none';
  display_pandate(document.getElementById('employee_pan').style.display)
  });
  function display_field(val)
  {
    if(val.value == "ADD PAN")
    document.getElementById('employee_pan').style.display = '';
    else
    document.getElementById('employee_pan').style.display = 'none';
    document.getElementById('employee_pan').value = ''

    display_pandate(document.getElementById('employee_pan').style.display)
  }
  function display_pandate(val)
  {
    document.getElementById('pan_ed').style.display = val
    document.getElementById('pan_date').style.display = val
  }
= form_for(employee) do |f|
  - if employee.errors.any?
    #error_explanation
      %h2
        = pluralize(employee.errors.count, "error")
        prohibited this employee from being saved:
      %ul
        - employee.errors.full_messages.each do |msg|
          %li= msg
  %table.std_table{:cellpadding=>0,:cellspacing=>0}
    %tr
      %td
        %table
          %tr
            %td.std_td
              %table
                %tr
                  %td{:width=>130} Emp ID:&nbsp;
                  %td= f.text_field :refno, :size => '22'
                %tr
                  %td Father Name:&nbsp;
                  %td= f.text_field :father_name, :size => '22'
                %tr
                  %td Marital Status:&nbsp;
                  %td= f.select :marital_status, options_for_select(["Married", "Single", "Divorced"],employee.marital_status), {:prompt => 'Select Marital Status'}
                %tr
                  %td Date of Birth:&nbsp;
                  %td= f.text_field :date_of_birth, :id=>"dob", :class=>"date_input", :include_blank => true,  :start_year => 1920, :end_year => 2010
                %tr
                  %td Date of Leaving:&nbsp;
                  %td= f.text_field :date_of_leaving, :id=>"dol", :class=>"date_input1", :include_blank => true,  :start_year => 2000, :end_year => 2014
            %td.std_td
              %table
                %tr
                  %td{:width=>130} Employee Name:&nbsp;
                  %td{:colspan=>2}= f.text_field :empname, :size => '22'
                %tr
                  %td Gender:&nbsp;
                  %td{:colspan=>2}= f.select :gender, options_for_select(["Male", "Female"],employee.gender), {:prompt => 'Select Gender'}
                %tr
                  %td Spouse Name:&nbsp;
                  %td{:colspan=>2}= f.text_field :spouse_name, :size => '22'
                %tr
                  %td Date of Joining:&nbsp;
                  %td{:colspan=>2}= f.text_field :date_of_joining, :id=>"doj", :class=>"date_input2", :include_blank => true,  :start_year => 2000, :end_year => 2014
                %tr
                  %td{:width => 130} PAN :&nbsp;
                  %td= select_tag "panoption", options_for_select(["ADD PAN","PAN Applied", "PAN Invalid", "PAN Not Avbl"]),:prompt => 'Select', :onchange => "display_field(this)"
                  %td= f.text_field :pan,:style=>"width:90px"
                %tr
                  %td#pan_date{:width => 130} Effective Date(For PAN) :&nbsp;
                  %td{:colspan=>2}= f.text_field :pan_effective_date,:id=>"pan_ed", :class=>"date_input"

          %tr
            %td.std_td
              %table
                %tr
                  %td{:colspan=>2,:class=>'form_title'} Present Address
                %tr
                  %td{:width=>130} Residence No.:&nbsp;
                  %td= f.text_field :present_res_no, :size => '22'
                %tr
                  %td{:width=>130} Street:&nbsp;
                  %td= f.text_field :present_street, :size => '22'
                %tr
                  %td{:width=>130} City:&nbsp;
                  %td= f.text_field :present_city, :size => '22'
            %td.std_td
              %table
                %tr
                  %td &nbsp
                %tr
                  %td{:width=>130} Residence Name.:&nbsp;
                  %td= f.text_field :present_res_name, :size => '22'
                %tr
                  %td{:width=>130} Locality:&nbsp;
                  %td= f.text_field :present_locality, :size => '22'
                %tr
                  %td{:width=>130} State:&nbsp;
                  %td= f.select :present_state_id, options_for_select(State.all_states.collect {|sn| [ sn.state_name, sn.id ] }, employee.present_state_id), {:prompt => 'Select State'}
          %tr
            %td.std_td
              %table
                %tr
                  %td{:colspan=>2,:class=>'form_title'} Contact Information
                %tr
                  %td{:width=>130} Email:&nbsp;
                  %td= f.text_field :email, :size => '22'
            %td.std_td
              %table
                %tr
                  %td &nbsp
                %tr
                  %td{:width=>130} Mobile Number:&nbsp;
                  %td= f.text_field :mobile, :size => '22'
          %tr
            %td.std_td{:colspan=>2}
              %table
                %tr
                  %td &nbsp;
                %tr
                  %td{:colspan=>2}= f.submit