= form_for(leave_taken) do |f|
  - if leave_taken.errors.any?
    #error_explanation
    %h2
      = pluralize(leave_taken.errors.count, "error")
      prohibited this leave from being saved:
    %ul
      - leave_taken.errors.full_messages.each do |msg|
        %li= msg
  %table.std_table{:cellpadding=>0,:cellspacing=>0}
    %tr
      %td
        %table
          %tr
            %td.std_td{:style=>"width:100%"}
              %table
          %tr
            %td.std_td
              %table
                %tr
                  %td{:style=>'width:100px'} Month/Year:&nbsp;
                  %td= f.select :leave_detail_date, options_for_select(Paymonth.months.collect{|mon| [mon.month_name,mon.month_name]},leave_taken.leave_detail_date),{:prompt => 'Select'}
          %tr
            %td.std_td
              #table_wrappper
                #inner_table_wrapper
                  %table.table_grid{:cellpadding => 0, :cellspacing => 3}
                    %tr
                      %td.table_grid_header Employee ID
                      %td.table_grid_header Employee Name
                      %td.table_grid_header Leave Count
                      %td.table_grid_header Date Wise(Leave)
                      %td.table_grid_header From Date(Leave)
                      %td.table_grid_header To Date(Leave)
                      %td.table_grid_header LOP Count
                      %td.table_grid_header Date Wise(LOP)
                      %td.table_grid_header From Date(LOP)
                      %td.table_grid_header To Date(LOP)
                    - j=0
                    - @leave_taken_employees.each do |employee|
                      %tr{:class => "#{cycle('table_grid_odd_row', 'table_grid_even_row')}"}
                        %td.table_grid_td= employee[:refno]
                        %td.table_grid_td= employee[:empname]
                        %td.table_grid_td= text_field_tag "leave_takens[#{j}][leave_count]"
                        %td.table_grid_td= check_box_tag "leave_date_wise" ,j,nil,:onclick=>'leave_date(this)'
                        %td.table_grid_td= text_field_tag "leave_takens[#{j}][leave_from_date]",'', :class=>"date_input",:disabled => true
                        %td.table_grid_td= text_field_tag "leave_takens[#{j}][leave_to_date]",'', :class=>"date_input",:disabled => true
                        %td.table_grid_td= text_field_tag "leave_takens[#{j}][lop_count]"
                        %td.table_grid_td= check_box_tag "lop_date_wise",j,nil,:onclick=>'lop_date(this)'
                        %td.table_grid_td= text_field_tag "leave_takens[#{j}][lop_from_date]",'', :class=>"date_input",:disabled => true
                        %td.table_grid_td= text_field_tag "leave_takens[#{j}][lop_to_date]",'', :class=>"date_input",:disabled => true
                        = hidden_field_tag "leave_takens[#{j}][employee_id]", employee[:employee_id]
                        -#= hidden_field_tag "leave_takens[#{j}][][leave_from_date]"
                        -#= hidden_field_tag "leave_takens[#{j}][][leave_to_date]"
                        -#= hidden_field_tag "leave_takens[#{j}][][lop_from_date]"
                        -#= hidden_field_tag "leave_takens[#{j}][][lop_to_date]"
                        - j=j+1
          %tr
            %td.std_td= submit_tag "Save"

